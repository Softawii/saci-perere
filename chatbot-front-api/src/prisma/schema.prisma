datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

model user {
    id        Int             @id @default(autoincrement())
    username  String          @unique
    password  String
    name      String
    email     String          @unique
    isadmin   Boolean?
    favorites user_favorite[]
}

model topic {
    id          Int        @id @default(autoincrement())
    name        String     @unique
    description String?
    categories  category[]
}

model category {
    id          Int             @id @default(autoincrement())
    name        String          @unique
    description String?
    topic_id    Int
    topic       topic           @relation(fields: [topic_id], references: [id])
    favorites   user_favorite[]
    questions   question[]
}

model user_favorite {
    user_id     Int
    category_id Int
    user        user     @relation(fields: [user_id], references: [id])
    category    category @relation(fields: [category_id], references: [id])

    @@id([user_id, category_id])
}

model answer {
    id        Int        @id @default(autoincrement())
    value     String
    questions question[]
}

model question {
    id               Int                @id @default(autoincrement())
    category_id      Int
    answer_id        Int
    value            String
    category         category           @relation(fields: [category_id], references: [id])
    answer           answer             @relation(fields: [answer_id], references: [id])
    unknown_question unknown_question[]
}

model unknown_question {
    id                    Int      @id @default(autoincrement())
    user_question         String
    predicted_question_id Int
    predicted_score       Float
    question              question @relation(fields: [predicted_question_id], references: [id])
}
